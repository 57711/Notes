# 为什么选择函数组件

## 类和函数组件

React 中的类通常被称为“类组件”。它们传统上用于定义组件并管理其状态和生命周期。类组件扩展了 React.Component 类，并且需要更多样板代码。

函数组件是定义 React 组件的一种更简洁、更现代的方式。它们也被称为“功能组件”。函数组件本质上是返回 JSX 元素的 JavaScript 函数。

## 函数组件优势

- 代码少，使用函数式编程，没有`this`
- hooks 性能好，简化生命周期
- 使用闭包，变量是当前函数内部的

先点 button，再修改 props

```js
function ComFn(props) {
  console.log('函数式组件的函数被调用了');

  //这个是闭包：
  // 每调用一次父函数（ComFn），都会重新定义一个新的子函数。新的函数中保存着父函数新的形参
  const showMessage = () => {
    console.log('函数式组件: ' + props.name);
  };

  //这个是闭包：
  //每调用一次父函数（ComFn），都会重新定义一个新的子函数。新的函数中保存着父函数新的形参
  const handleClick = () => {
    setTimeout(showMessage, 3000);
  };

  return (
    <div style={{ backgroundColor: 'skyblue' }}>
      <h5>我是函数式组件</h5>
      <p>name：{props.name}</p>
      {/*先点击这个按钮，调用，第一次定义的 showMessage和handleClick*/}
      <input type="button" value="调用带着定时器的函数" onClick={handleClick} />
    </div>
  );
}
```

## 函数组件问题

- 使用闭包，有陷阱

## 总结

**界面应当是数据的不同形式的简单投影。相同的输入应该产生相同的输出。**

- 而函数式组件的写法，使用闭包的特性，显然符合这一理念：每个闭包里保存在父函数的当前形参（props）和局部变量。

  函数组件主要是函数式编程，无副作用，并且在引用的时候透明的特点

- 而类组件里，由于，每次读取数据，要根据 this 指针去读取，那必然不会读取到属于自己当前状态的值。而是更新后的最新的值。

  类的组件主要是面向对象编程，是建立在继承之上，它的生命周期等核心概念的特点

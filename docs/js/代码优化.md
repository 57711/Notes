# 代码优化

## 尾调用/尾递归

函数最后一步操作是调用函数，就是尾调用。尾调用函数不用外层函数内的变量，就可以进行尾调用优化，尾调用的函数栈帧可以替换掉外层函数栈帧。尾递归时写成尾调用形式可以减少调用栈为$O(1)$。

```js
function factorial(n, total = 1) {
  if (n === 1) return total;
  return factorial(n - 1, n * total);
}

function fibonacci(n, a = 1, b = 1) {
  if (n <= 1) return b;
  return fibonacci(n - 1, b, a + b);
}
```

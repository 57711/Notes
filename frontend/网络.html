<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css"><title>网络 | DevNote</title><meta name="description" content="Paul's VuePress notes">
    <link rel="preload" href="/Notes/assets/style-1xK2Glcg.css" as="style"><link rel="stylesheet" href="/Notes/assets/style-1xK2Glcg.css">
    <link rel="modulepreload" href="/Notes/assets/app-7D7ZZLlA.js"><link rel="modulepreload" href="/Notes/assets/网络.html-jHnzD6HL.js"><link rel="modulepreload" href="/Notes/assets/网络.html-htnnOX-6.js">
    <link rel="prefetch" href="/Notes/assets/index.html-yYsqBpTS.js" as="script"><link rel="prefetch" href="/Notes/assets/类型.html-9Wehd2pi.js" as="script"><link rel="prefetch" href="/Notes/assets/bfs-dfs.html-CppYkyMK.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-QwFYVwcz.js" as="script"><link rel="prefetch" href="/Notes/assets/二分查找.html-wbgnTkI9.js" as="script"><link rel="prefetch" href="/Notes/assets/位运算.html-jvLRyiU1.js" as="script"><link rel="prefetch" href="/Notes/assets/剪枝.html-F6S_N-Yv.js" as="script"><link rel="prefetch" href="/Notes/assets/动态规划.html--6OMg2zO.js" as="script"><link rel="prefetch" href="/Notes/assets/字典树.html-njK9BfZY.js" as="script"><link rel="prefetch" href="/Notes/assets/映射-集合.html-cEq2oUND.js" as="script"><link rel="prefetch" href="/Notes/assets/树-图.html-bvIf-Ewp.js" as="script"><link rel="prefetch" href="/Notes/assets/线性数据结构.html-LiNuxLM3.js" as="script"><link rel="prefetch" href="/Notes/assets/设计模式.html-m32gc1iy.js" as="script"><link rel="prefetch" href="/Notes/assets/贪心算法.html-KhywTRnT.js" as="script"><link rel="prefetch" href="/Notes/assets/递归-分治.html-RfLR7405.js" as="script"><link rel="prefetch" href="/Notes/assets/BOM.html-Zkx5aYUi.js" as="script"><link rel="prefetch" href="/Notes/assets/CSS.html-p825ODeE.js" as="script"><link rel="prefetch" href="/Notes/assets/canvas_webGL.html-BK-5zIJe.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-TG2TEnAh.js" as="script"><link rel="prefetch" href="/Notes/assets/vue_react.html-hYdYBPGF.js" as="script"><link rel="prefetch" href="/Notes/assets/webpack.html-aNypCQjc.js" as="script"><link rel="prefetch" href="/Notes/assets/worker.html-AB47Ved4.js" as="script"><link rel="prefetch" href="/Notes/assets/优化.html-EmEXt_ut.js" as="script"><link rel="prefetch" href="/Notes/assets/低代码项目.html-5UigsTYe.js" as="script"><link rel="prefetch" href="/Notes/assets/包管理.html-8PCex9RL.js" as="script"><link rel="prefetch" href="/Notes/assets/实现tab之间通信.html-DNUgixeM.js" as="script"><link rel="prefetch" href="/Notes/assets/性能指标.html-d3oon66P.js" as="script"><link rel="prefetch" href="/Notes/assets/自定义vite插件.html-9x0YFZPu.js" as="script"><link rel="prefetch" href="/Notes/assets/跨域.html-VsN3a89H.js" as="script"><link rel="prefetch" href="/Notes/assets/错误捕获.html-xB_3Vcql.js" as="script"><link rel="prefetch" href="/Notes/assets/页面加载流程.html-1srG1ezy.js" as="script"><link rel="prefetch" href="/Notes/assets/项目.html-Ba-1VG1z.js" as="script"><link rel="prefetch" href="/Notes/assets/AsyncLocalStorage.html-5Ls4Vdsn.js" as="script"><link rel="prefetch" href="/Notes/assets/WebRTC.html-2XH-PtR1.js" as="script"><link rel="prefetch" href="/Notes/assets/buffer模块.html-3FJUf0w1.js" as="script"><link rel="prefetch" href="/Notes/assets/node执行流程.html-d9W6rnRk.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-80SQHzqu.js" as="script"><link rel="prefetch" href="/Notes/assets/ssr.html--q44DXDC.js" as="script"><link rel="prefetch" href="/Notes/assets/stream.html-vj8sm8Lz.js" as="script"><link rel="prefetch" href="/Notes/assets/事件循环.html-IgcDXdQK.js" as="script"><link rel="prefetch" href="/Notes/assets/优化.html-wJizqRpH.js" as="script"><link rel="prefetch" href="/Notes/assets/数据库三个范式.html-6E2ByUVf.js" as="script"><link rel="prefetch" href="/Notes/assets/编译node.html-qgF35zqL.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-kvNaK0ee.js" as="script"><link rel="prefetch" href="/Notes/assets/let var.html-M5amcaJO.js" as="script"><link rel="prefetch" href="/Notes/assets/promise.html-f0r4xKN7.js" as="script"><link rel="prefetch" href="/Notes/assets/symbol.html-T8IgslZD.js" as="script"><link rel="prefetch" href="/Notes/assets/tree shaking.html-VipzbQJz.js" as="script"><link rel="prefetch" href="/Notes/assets/ts.html-0gYhU0oV.js" as="script"><link rel="prefetch" href="/Notes/assets/上下文.html-TGh2oNt1.js" as="script"><link rel="prefetch" href="/Notes/assets/优化方案.html-gr6YSFNs.js" as="script"><link rel="prefetch" href="/Notes/assets/内存.html-zKK9vzsb.js" as="script"><link rel="prefetch" href="/Notes/assets/函数.html-w1FCvAeZ.js" as="script"><link rel="prefetch" href="/Notes/assets/判断两个值相等.html--um9qOs1.js" as="script"><link rel="prefetch" href="/Notes/assets/原型链.html--esux6QW.js" as="script"><link rel="prefetch" href="/Notes/assets/基本类型不可变.html-cLKH6yer.js" as="script"><link rel="prefetch" href="/Notes/assets/对象.html-22PiRf1g.js" as="script"><link rel="prefetch" href="/Notes/assets/模块化.html-1OXlp6i4.js" as="script"><link rel="prefetch" href="/Notes/assets/编译原理.html-yGTp9YVr.js" as="script"><link rel="prefetch" href="/Notes/assets/跨窗口传递.html-K-F4fG0z.js" as="script"><link rel="prefetch" href="/Notes/assets/hooks.html-TVUPiHgh.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-9cxCgsMa.js" as="script"><link rel="prefetch" href="/Notes/assets/react-reconciler.html-77rS6RIL.js" as="script"><link rel="prefetch" href="/Notes/assets/react-router.html-JPYkXjcM.js" as="script"><link rel="prefetch" href="/Notes/assets/react原理.html-N_RuB3iX.js" as="script"><link rel="prefetch" href="/Notes/assets/redux.html-DiPT8r7W.js" as="script"><link rel="prefetch" href="/Notes/assets/为什么选择函数组件.html-VI9WOebY.js" as="script"><link rel="prefetch" href="/Notes/assets/生命周期.html-HYmYfTKD.js" as="script"><link rel="prefetch" href="/Notes/assets/运行时代码优化.html-WNniqbzZ.js" as="script"><link rel="prefetch" href="/Notes/assets/闭包陷阱.html-5-qENEAy.js" as="script"><link rel="prefetch" href="/Notes/assets/diff.html-k7OptIkK.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-02uTKQSy.js" as="script"><link rel="prefetch" href="/Notes/assets/keepAlive.html-mqVQK5s3.js" as="script"><link rel="prefetch" href="/Notes/assets/nextTick.html-ut7RS9eW.js" as="script"><link rel="prefetch" href="/Notes/assets/vue-router.html-UEEtF5QS.js" as="script"><link rel="prefetch" href="/Notes/assets/响应式.html-QnOaFAnL.js" as="script"><link rel="prefetch" href="/Notes/assets/整体执行流程.html-HwZzv7NF.js" as="script"><link rel="prefetch" href="/Notes/assets/404.html-_66Di_BG.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-PaFfcXkp.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-T8JdIFTH.js" as="script"><link rel="prefetch" href="/Notes/assets/类型.html-6GIpqmYC.js" as="script"><link rel="prefetch" href="/Notes/assets/bfs-dfs.html-ot6-6xI2.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-Rs5nyBOv.js" as="script"><link rel="prefetch" href="/Notes/assets/二分查找.html-ms0YLa3o.js" as="script"><link rel="prefetch" href="/Notes/assets/位运算.html-kw06xla5.js" as="script"><link rel="prefetch" href="/Notes/assets/剪枝.html-0Y1k7J0x.js" as="script"><link rel="prefetch" href="/Notes/assets/动态规划.html-E01fv6Um.js" as="script"><link rel="prefetch" href="/Notes/assets/字典树.html--2Oz-tI_.js" as="script"><link rel="prefetch" href="/Notes/assets/映射-集合.html-h4sry5Pw.js" as="script"><link rel="prefetch" href="/Notes/assets/树-图.html-rKPX_ebC.js" as="script"><link rel="prefetch" href="/Notes/assets/线性数据结构.html-R8QUZYu_.js" as="script"><link rel="prefetch" href="/Notes/assets/设计模式.html-GOgbUzKz.js" as="script"><link rel="prefetch" href="/Notes/assets/贪心算法.html-pT16KjqU.js" as="script"><link rel="prefetch" href="/Notes/assets/递归-分治.html-5Y4mJBPf.js" as="script"><link rel="prefetch" href="/Notes/assets/BOM.html-QS_fJSpv.js" as="script"><link rel="prefetch" href="/Notes/assets/CSS.html-4veCX0V8.js" as="script"><link rel="prefetch" href="/Notes/assets/canvas_webGL.html-vh6eETbJ.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-lNTvYAF5.js" as="script"><link rel="prefetch" href="/Notes/assets/vue_react.html-xejHPVvW.js" as="script"><link rel="prefetch" href="/Notes/assets/webpack.html-SBYs20yN.js" as="script"><link rel="prefetch" href="/Notes/assets/worker.html-kaysKBtI.js" as="script"><link rel="prefetch" href="/Notes/assets/优化.html-UmD6L2Vr.js" as="script"><link rel="prefetch" href="/Notes/assets/低代码项目.html-XVqcTvD3.js" as="script"><link rel="prefetch" href="/Notes/assets/包管理.html-c8fKZXbs.js" as="script"><link rel="prefetch" href="/Notes/assets/实现tab之间通信.html-Y2LSKRUr.js" as="script"><link rel="prefetch" href="/Notes/assets/性能指标.html-J_MQ8rxp.js" as="script"><link rel="prefetch" href="/Notes/assets/自定义vite插件.html-aJoQEug_.js" as="script"><link rel="prefetch" href="/Notes/assets/跨域.html-bSwvCJzy.js" as="script"><link rel="prefetch" href="/Notes/assets/错误捕获.html-6TXf1l_Z.js" as="script"><link rel="prefetch" href="/Notes/assets/页面加载流程.html-UGbs11TH.js" as="script"><link rel="prefetch" href="/Notes/assets/项目.html-VMP95DEW.js" as="script"><link rel="prefetch" href="/Notes/assets/AsyncLocalStorage.html-eUcYWvtN.js" as="script"><link rel="prefetch" href="/Notes/assets/WebRTC.html-GVhvJ7b7.js" as="script"><link rel="prefetch" href="/Notes/assets/buffer模块.html--GvCDyiL.js" as="script"><link rel="prefetch" href="/Notes/assets/node执行流程.html-Rjjgxo3T.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-Yq1rXOoV.js" as="script"><link rel="prefetch" href="/Notes/assets/ssr.html-GaePZVUj.js" as="script"><link rel="prefetch" href="/Notes/assets/stream.html-oMuknK-J.js" as="script"><link rel="prefetch" href="/Notes/assets/事件循环.html-P5SkAjv8.js" as="script"><link rel="prefetch" href="/Notes/assets/优化.html-1QoPttjP.js" as="script"><link rel="prefetch" href="/Notes/assets/数据库三个范式.html-TaWcvI_h.js" as="script"><link rel="prefetch" href="/Notes/assets/编译node.html-i-MSatvZ.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-3-h5BfxD.js" as="script"><link rel="prefetch" href="/Notes/assets/let var.html-oQqmHxWB.js" as="script"><link rel="prefetch" href="/Notes/assets/promise.html-z-WQWCsy.js" as="script"><link rel="prefetch" href="/Notes/assets/symbol.html-mK1KtFC5.js" as="script"><link rel="prefetch" href="/Notes/assets/tree shaking.html-i-2Veklt.js" as="script"><link rel="prefetch" href="/Notes/assets/ts.html-t3XgQcVb.js" as="script"><link rel="prefetch" href="/Notes/assets/上下文.html-KWXs3Exz.js" as="script"><link rel="prefetch" href="/Notes/assets/优化方案.html-KC18E0H6.js" as="script"><link rel="prefetch" href="/Notes/assets/内存.html-_A_1Z9GD.js" as="script"><link rel="prefetch" href="/Notes/assets/函数.html-6BPihivN.js" as="script"><link rel="prefetch" href="/Notes/assets/判断两个值相等.html-Vau0enk1.js" as="script"><link rel="prefetch" href="/Notes/assets/原型链.html-8IgJJTfj.js" as="script"><link rel="prefetch" href="/Notes/assets/基本类型不可变.html--DVaRM0u.js" as="script"><link rel="prefetch" href="/Notes/assets/对象.html-78sZ2Dh1.js" as="script"><link rel="prefetch" href="/Notes/assets/模块化.html-yMBTQ0Yy.js" as="script"><link rel="prefetch" href="/Notes/assets/编译原理.html-dKP8xHx2.js" as="script"><link rel="prefetch" href="/Notes/assets/跨窗口传递.html-lYVMzgOs.js" as="script"><link rel="prefetch" href="/Notes/assets/hooks.html-GTu4FxbZ.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-0HBXCXr3.js" as="script"><link rel="prefetch" href="/Notes/assets/react-reconciler.html-b-hNgLuz.js" as="script"><link rel="prefetch" href="/Notes/assets/react-router.html--3-Fdn6u.js" as="script"><link rel="prefetch" href="/Notes/assets/react原理.html-tp7HQSUr.js" as="script"><link rel="prefetch" href="/Notes/assets/redux.html-o66jIzW2.js" as="script"><link rel="prefetch" href="/Notes/assets/为什么选择函数组件.html-LBCq7LW_.js" as="script"><link rel="prefetch" href="/Notes/assets/生命周期.html-Lp4GMvx8.js" as="script"><link rel="prefetch" href="/Notes/assets/运行时代码优化.html--6r0r0pa.js" as="script"><link rel="prefetch" href="/Notes/assets/闭包陷阱.html-LBpej28a.js" as="script"><link rel="prefetch" href="/Notes/assets/diff.html-HO2SygQf.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-YscmzCr4.js" as="script"><link rel="prefetch" href="/Notes/assets/keepAlive.html-yW7WHJzJ.js" as="script"><link rel="prefetch" href="/Notes/assets/nextTick.html-zNgVQ_7h.js" as="script"><link rel="prefetch" href="/Notes/assets/vue-router.html-XR9848Uv.js" as="script"><link rel="prefetch" href="/Notes/assets/响应式.html-8uR_zv0U.js" as="script"><link rel="prefetch" href="/Notes/assets/整体执行流程.html-d3DTvZTR.js" as="script"><link rel="prefetch" href="/Notes/assets/404.html-X0W6e8Ru.js" as="script"><link rel="prefetch" href="/Notes/assets/index.html-72pQdAjQ.js" as="script"><link rel="prefetch" href="/Notes/assets/SearchResult-6p3Oh-he.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/Notes/" class=""><!----><span class="site-name">DevNote</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/Notes/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/Notes/" class="" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active">frontend <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/Notes/frontend/BOM.html" class="sidebar-item" aria-label="BOM"><!--[--><!--]--> BOM <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/CSS.html" class="sidebar-item" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/canvas_webGL.html" class="sidebar-item" aria-label="Canvas &amp; WebGL"><!--[--><!--]--> Canvas &amp; WebGL <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/" class="router-link-active sidebar-item" aria-label="前端"><!--[--><!--]--> 前端 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/vue_react.html" class="sidebar-item" aria-label="vue &amp; react 区别"><!--[--><!--]--> vue &amp; react 区别 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/webpack.html" class="sidebar-item" aria-label="Webpack"><!--[--><!--]--> Webpack <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/worker.html" class="sidebar-item" aria-label="worker"><!--[--><!--]--> worker <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E4%BC%98%E5%8C%96.html" class="sidebar-item" aria-label="优化"><!--[--><!--]--> 优化 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E4%BD%8E%E4%BB%A3%E7%A0%81%E9%A1%B9%E7%9B%AE.html" class="sidebar-item" aria-label="低代码"><!--[--><!--]--> 低代码 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E5%8C%85%E7%AE%A1%E7%90%86.html" class="sidebar-item" aria-label="包管理"><!--[--><!--]--> 包管理 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E5%AE%9E%E7%8E%B0tab%E4%B9%8B%E9%97%B4%E9%80%9A%E4%BF%A1.html" class="sidebar-item" aria-label="实现tab之间通信"><!--[--><!--]--> 实现tab之间通信 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87.html" class="sidebar-item" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#tcp" class="router-link-active router-link-exact-active sidebar-item" aria-label="TCP"><!--[--><!--]--> TCP <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#连接过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="连接过程"><!--[--><!--]--> 连接过程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#三次握手的原因" class="router-link-active router-link-exact-active sidebar-item" aria-label="三次握手的原因"><!--[--><!--]--> 三次握手的原因 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#tls" class="router-link-active router-link-exact-active sidebar-item" aria-label="TLS"><!--[--><!--]--> TLS <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#tls1-3" class="router-link-active router-link-exact-active sidebar-item" aria-label="TLS1.3"><!--[--><!--]--> TLS1.3 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#椭圆曲线离散对数-tls1-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="椭圆曲线离散对数 TLS1.2"><!--[--><!--]--> 椭圆曲线离散对数 TLS1.2 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#tcp-udp-区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="TCP/ UDP 区别"><!--[--><!--]--> TCP/ UDP 区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#http-请求头" class="router-link-active router-link-exact-active sidebar-item" aria-label="HTTP 请求头"><!--[--><!--]--> HTTP 请求头 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#host" class="router-link-active router-link-exact-active sidebar-item" aria-label="host"><!--[--><!--]--> host <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#origin-表明请求来源" class="router-link-active router-link-exact-active sidebar-item" aria-label="origin 表明请求来源"><!--[--><!--]--> origin 表明请求来源 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#referer" class="router-link-active router-link-exact-active sidebar-item" aria-label="referer"><!--[--><!--]--> referer <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#http-1-0-1-1-2" class="router-link-active router-link-exact-active sidebar-item" aria-label="http 1.0/1.1/2"><!--[--><!--]--> http 1.0/1.1/2 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#状态码" class="router-link-active router-link-exact-active sidebar-item" aria-label="状态码"><!--[--><!--]--> 状态码 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#_3xx" class="router-link-active router-link-exact-active sidebar-item" aria-label="3xx"><!--[--><!--]--> 3xx <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#_4xx" class="router-link-active router-link-exact-active sidebar-item" aria-label="4xx"><!--[--><!--]--> 4xx <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#websocket" class="router-link-active router-link-exact-active sidebar-item" aria-label="websocket"><!--[--><!--]--> websocket <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#headers" class="router-link-active router-link-exact-active sidebar-item" aria-label="headers"><!--[--><!--]--> headers <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#sse-server-sent-events" class="router-link-active router-link-exact-active sidebar-item" aria-label="SSE server-sent events"><!--[--><!--]--> SSE server-sent events <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#安全" class="router-link-active router-link-exact-active sidebar-item" aria-label="安全"><!--[--><!--]--> 安全 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#csrf-跨站请求伪造" class="router-link-active router-link-exact-active sidebar-item" aria-label="csrf 跨站请求伪造"><!--[--><!--]--> csrf 跨站请求伪造 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#xss-跨站脚本攻击" class="router-link-active router-link-exact-active sidebar-item" aria-label="xss 跨站脚本攻击"><!--[--><!--]--> xss 跨站脚本攻击 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#noreferer-noopener" class="router-link-active router-link-exact-active sidebar-item" aria-label="noreferer/noopener"><!--[--><!--]--> noreferer/noopener <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#三方-cookie" class="router-link-active router-link-exact-active sidebar-item" aria-label="三方 cookie"><!--[--><!--]--> 三方 cookie <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#chips" class="router-link-active router-link-exact-active sidebar-item" aria-label="CHIPS"><!--[--><!--]--> CHIPS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/Notes/frontend/%E7%BD%91%E7%BB%9C.html#first-party-sets-第一方集" class="router-link-active router-link-exact-active sidebar-item" aria-label="First-Party Sets 第一方集"><!--[--><!--]--> First-Party Sets 第一方集 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/Notes/frontend/%E8%87%AA%E5%AE%9A%E4%B9%89vite%E6%8F%92%E4%BB%B6.html" class="sidebar-item" aria-label="自定义 vite 插件"><!--[--><!--]--> 自定义 vite 插件 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E8%B7%A8%E5%9F%9F.html" class="sidebar-item" aria-label="跨域"><!--[--><!--]--> 跨域 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E9%94%99%E8%AF%AF%E6%8D%95%E8%8E%B7.html" class="sidebar-item" aria-label="全局错误捕获"><!--[--><!--]--> 全局错误捕获 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E6%B5%81%E7%A8%8B.html" class="sidebar-item" aria-label="页面加载流程"><!--[--><!--]--> 页面加载流程 <!--[--><!--]--></a><!----></li><li><a href="/Notes/frontend/%E9%A1%B9%E7%9B%AE.html" class="sidebar-item" aria-label="项目"><!--[--><!--]--> 项目 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="网络" tabindex="-1"><a class="header-anchor" href="#网络" aria-hidden="true">#</a> 网络</h1><h2 id="tcp" tabindex="-1"><a class="header-anchor" href="#tcp" aria-hidden="true">#</a> TCP</h2><h3 id="连接过程" tabindex="-1"><a class="header-anchor" href="#连接过程" aria-hidden="true">#</a> 连接过程</h3><p><img src="/Notes/images/TCP三次握手.webp" alt="TCP三次握手"></p><p><img src="/Notes/images/TCP连接断开.webp" alt="TCP连接断开"></p><p>LISTEN：等待从任何远端 TCP 和端口的连接请求。</p><p>SYN_SENT：发送完一个连接请求后等待一个匹配的连接请求。</p><p>SYN_RECEIVED：发送连接请求并且接收到匹配的连接请求以后等待连接请求确认。</p><p>ESTABLISHED：表示一个打开的连接，接收到的数据可以被投递给用户。连接的数据传输阶段的正常状态。</p><p>FIN_WAIT_1：等待远端 TCP 的连接终止请求，或者等待之前发送的连接终止请求的确认。</p><p>FIN_WAIT_2：等待远端 TCP 的连接终止请求。</p><p>CLOSE_WAIT：等待本地用户的连接终止请求。</p><p>CLOSING：等待远端 TCP 的连接终止请求确认。</p><p>LAST_ACK：等待先前发送给远端 TCP 的连接终止请求的确认（包括它字节的连接终止请求的确认）</p><p>TIME_WAIT：等待足够的时间过去以确保远端 TCP 接收到它的连接终止请求的确认。</p><p>TIME_WAIT 两个存在的理由： 1.可靠的实现 tcp 全双工连接的终止； 2.允许老的重复分节在网络中消逝。</p><p>CLOSED：不在连接状态（这是为方便描述假想的状态，实际不存在）</p><h3 id="三次握手的原因" tabindex="-1"><a class="header-anchor" href="#三次握手的原因" aria-hidden="true">#</a> 三次握手的原因</h3><ol><li>（首要原因）防止旧的重复连接初始化造成混乱。旧请求先到 如果是两次握手客户端没办法告诉服务端是不是旧的</li><li>同步双方的初始序列号</li><li>避免资源浪费</li></ol><p><img src="/Notes/images/三次握手的原因.jpg" alt="三次握手的原因"></p><h2 id="tls" tabindex="-1"><a class="header-anchor" href="#tls" aria-hidden="true">#</a> TLS</h2><h3 id="tls1-3" tabindex="-1"><a class="header-anchor" href="#tls1-3" aria-hidden="true">#</a> TLS1.3</h3><p><img src="/Notes/images/Handshake(TLS1.3).webp" alt="TLS1.3"></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 原 DH 握手</span>
<span class="token operator">-</span><span class="token number">1.</span>浏览器向服务器发送 client_random，<span class="token constant">TLS</span> 版本和供筛选的加密套件列表。
<span class="token comment">// TLS1.3 优化</span>
<span class="token operator">+</span><span class="token number">1.</span>浏览器向服务器发送 client_params，client_random，<span class="token constant">TLS</span> 版本和供筛选的加密套件列表。
 <span class="token comment">// 原 DH 握手</span>
<span class="token operator">-</span><span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token comment">// TLS1.3 优化</span>
<span class="token operator">+</span><span class="token number">2.</span>服务器返回：server_random、server_params、<span class="token constant">TLS</span> 版本、确定的加密套件方法以及证书。
<span class="token operator">+</span>浏览器接收，先验证数字证书和签名。
<span class="token operator">+</span>现在双方都有 client_params、server_params，可以根据 <span class="token constant">ECDHE</span> 计算出 pre_random <span class="token function">了。非对称</span>
<span class="token punctuation">(</span>Elliptic Curve Diffie<span class="token operator">-</span>Hellman Ephemeral<span class="token punctuation">)</span>临时椭圆曲线迪菲<span class="token operator">-</span>赫尔曼交换
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="椭圆曲线离散对数-tls1-2" tabindex="-1"><a class="header-anchor" href="#椭圆曲线离散对数-tls1-2" aria-hidden="true">#</a> 椭圆曲线离散对数 TLS1.2</h3><p><img src="/Notes/images/Handshake(Diffie-Hellman).webp" alt="TLS1.2"> ￼</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token number">1.</span>浏览器向服务器发送随机数 client_random，<span class="token constant">TLS</span> 版本和供筛选的加密套件列表。
<span class="token comment">// RSA</span>
<span class="token operator">-</span><span class="token number">2.</span>服务器接收到，立即返回 server_random，确认好双方都支持的加密套件 <span class="token operator">-</span><span class="token function">以及数字证书</span> <span class="token punctuation">(</span>证书中附带公钥<span class="token punctuation">)</span>。
<span class="token comment">// DH</span>
<span class="token operator">+</span><span class="token number">2.</span>服务器接收到，立即返回 server_random，确认好双方都支持的加密套件
<span class="token operator">+</span><span class="token function">以及数字证书</span> <span class="token punctuation">(</span>证书中附带公钥<span class="token punctuation">)</span>。
<span class="token operator">+</span>同时服务器利用私钥将 client_random<span class="token punctuation">,</span>server_random，server_params 签名，
<span class="token operator">+</span>生成服务器签名。然后将签名和 server_params 也发送给客户端。
<span class="token operator">+</span>这里的 server_params 为 <span class="token constant">DH</span> 算法所需参数。
<span class="token comment">// RSA</span>
<span class="token operator">-</span><span class="token number">3.</span>浏览器接收，先验证数字证书。
<span class="token operator">-</span>若通过，接着使用加密套件的密钥协商算法 <span class="token constant">RSA</span> 算法 <span class="token operator">-</span>生成另一个随机数 pre_random，并且用证书里的公钥加密，传给服务器。
<span class="token comment">// DH</span>
<span class="token operator">+</span><span class="token number">3.</span>浏览器接收，先验证数字证书和 _签名_。
 <span class="token operator">+</span>若通过，将 client_params 传递给服务器。
<span class="token operator">+</span>这里的 client_params 为 <span class="token constant">DH</span> 算法所需参数。

<span class="token operator">-</span><span class="token number">4.</span>服务器用私钥解密这个被加密后的 pre_random，参考 “非对称加密”。
 <span class="token operator">+</span><span class="token number">4.</span>现在客户端和服务器都有 client_params、server_params 两个参数，
<span class="token operator">+</span>因 <span class="token constant">ECDHE</span> 计算基于 “椭圆曲线离散对数”，通过这两个 <span class="token constant">DH</span> 参数就能计算出 pre_random。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/Notes/images/TLS1.2.png" alt="TLS1.2"></p><p>￼</p><h2 id="tcp-udp-区别" tabindex="-1"><a class="header-anchor" href="#tcp-udp-区别" aria-hidden="true">#</a> TCP/ UDP 区别</h2><ul><li>Tcp 需要链接， 有重传机制， 点对点</li><li>UDP 效率高， 多对多</li></ul><h2 id="http-请求头" tabindex="-1"><a class="header-anchor" href="#http-请求头" aria-hidden="true">#</a> HTTP 请求头</h2><ul><li>Origin：协议+域名+端口，主要用于跨域。</li><li>Host：域名+端口，HTTP2 对应字段为 :authority，主要用于服务器区分服务。</li><li>Referer：去掉 fragment（锚点）和 userinfo（用户信息）的 url，用于确认请求的来源页面。 <ul><li>通过设置 noreferer, 来避免携带 referer<code>&lt;a href=&quot;&quot; rel=&quot;noreferer&quot;&gt;link&lt;/a&gt;</code></li></ul></li></ul><h3 id="host" tabindex="-1"><a class="header-anchor" href="#host" aria-hidden="true">#</a> host</h3><p>多个 host 指向同一个 ip，一个服务器 host 多个服务，此时仅仅通过 IP 无法访问到对应的服务，可通过 Host 来进行定位。</p><p>仅包括<strong>域名和端口号</strong>，如 test.pay.com:8090。</p><p>Host 是唯一客户端必须携带的请求头，如果缺失了该请求头则会返回 400 状态码。在 HTTP/2 以及 HTTP/3 中，以一个伪头 :authority 代替。</p><h3 id="origin-表明请求来源" tabindex="-1"><a class="header-anchor" href="#origin-表明请求来源" aria-hidden="true">#</a> origin 表明请求来源</h3><p>当前请求资源所在页面的<strong>协议，主机，端口</strong>，用来说明请求从哪里发起的，如<code>http://test.my.com:8081</code></p><p>这个参数一般只存在于 CORS 跨域请求中，服务端据此判断是否允许跨域,普通请求没有这个 header！ 如果有 Origin 参数，我们可以看到 response 有对应的 header：<code>Access-Control-Allow-Origin</code></p><p>从广义上讲，用户代理会在以下情况中添加 Origin 请求标头：</p><ul><li>跨源请求。</li><li>除 GET 和 HEAD 以外的同源请求（即它会被添加到同源的 POST、OPTIONS、PUT、PATCH 和 DELETE 请求中）。</li></ul><h3 id="referer" tabindex="-1"><a class="header-anchor" href="#referer" aria-hidden="true">#</a> referer</h3><p>当前请求页面的来源页面的<strong>完整路径</strong>：协议+域名+查询参数（注意不包含锚点信息）,即表示当前页面是通过此来源页面里的链接进入的，如<code>http://test.my.com/p/GHB2021081702-001/index.html?a=1&amp;b=2</code>，所有类型的请求都包含此 header。</p><p>服务端一般使用 Referer 请求头识别访问来源，可能会以此进行统计分析、日志记录以及缓存优化等。</p><p>在以下两种情况下，Referer 不会被发送：</p><ul><li>来源页面采用的协议为表示本地文件的 &quot;file&quot; 或者 &quot;data&quot; URI；</li><li>当前请求页面采用的是非安全协议，而来源页面采用的是安全协议（HTTPS）。</li></ul><p>nginx 对不同域名的配置</p><div class="language-conf line-numbers-mode" data-ext="conf"><pre class="language-conf"><code>server {
    # 博客页面
    server_name  blog.fstars.wang;
    location / {
        proxy_pass   http://localhost:3000;
        proxy_cache
    }
}
server {
    # 图片等资源
    server_name  static.fstars.wang;
    location / {
        root   /www/static/;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="http-1-0-1-1-2" tabindex="-1"><a class="header-anchor" href="#http-1-0-1-1-2" aria-hidden="true">#</a> http 1.0/1.1/2</h2><ul><li>http1.0 建立一个 tcp 连接，进行一次 http 请求，然后会断开 tcp 连接。</li><li>http1.1, 有 keep-alive，默认不断开连接 <ul><li>http1.1 请求一般一次进行一个 http 请求。</li><li>http1.1 的 pipeline 可以一次发送多个 http 请求，但是响应需要按顺序，有堆头阻塞。</li></ul></li><li><a href="/frontend/%E4%BC%98%E5%8C%96.html#http2" target="_blank" rel="noopener noreferrer">http2<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 用帧和流实现多路复用，多个 http 可以在一个 tcp 中进行</li><li>浏览器限制 tcp 连接数 6 个</li></ul><h2 id="状态码" tabindex="-1"><a class="header-anchor" href="#状态码" aria-hidden="true">#</a> 状态码</h2><h3 id="_3xx" tabindex="-1"><a class="header-anchor" href="#_3xx" aria-hidden="true">#</a> 3xx</h3><h4 id="_301-moved-permanently-永久" tabindex="-1"><a class="header-anchor" href="#_301-moved-permanently-永久" aria-hidden="true">#</a> 301 moved permanently 永久</h4><ul><li>不可预测重定向方法 一般转为 get 推荐响应 get/head</li><li>缓存</li><li>搜索引擎会抓取网址 B 的内容，同时将网址保存为 B 网址。</li></ul><h4 id="_302-found-临时" tabindex="-1"><a class="header-anchor" href="#_302-found-临时" aria-hidden="true">#</a> 302 found 临时</h4><ul><li>不可预测重定向方法 一般转为 get 推荐响应 get/head</li><li>不缓存</li><li>时搜索引擎会抓取 B 网址内容，但是会将网址保存为 A 的。</li><li>因为保存为 a 的， 会有网址劫持风险</li></ul><h4 id="_303-see-other" tabindex="-1"><a class="header-anchor" href="#_303-see-other" aria-hidden="true">#</a> 303 see other</h4><p>重定向方法改为 Get（put -&gt; get）</p><h4 id="_304-not-modified" tabindex="-1"><a class="header-anchor" href="#_304-not-modified" aria-hidden="true">#</a> 304 not modified</h4><p>缓存 协商缓存 etag/if-none-match. last-modified/if-modified-since</p><h4 id="_307-temporary-redirect" tabindex="-1"><a class="header-anchor" href="#_307-temporary-redirect" aria-hidden="true">#</a> 307 temporary redirect</h4><p>重用原始方法和消息主体</p><h4 id="_308-permanent-redirect" tabindex="-1"><a class="header-anchor" href="#_308-permanent-redirect" aria-hidden="true">#</a> 308 permanent redirect</h4><p>重用原始方法和消息主体</p><h3 id="_4xx" tabindex="-1"><a class="header-anchor" href="#_4xx" aria-hidden="true">#</a> 4xx</h3><h4 id="_401-unauthorized" tabindex="-1"><a class="header-anchor" href="#_401-unauthorized" aria-hidden="true">#</a> 401 unauthorized</h4><p>没有身份验证凭证</p><h4 id="_403-forbidden" tabindex="-1"><a class="header-anchor" href="#_403-forbidden" aria-hidden="true">#</a> 403 forbidden</h4><p>进入 403，即使重新验证也不会改变该状态</p><h4 id="_404-not-found" tabindex="-1"><a class="header-anchor" href="#_404-not-found" aria-hidden="true">#</a> 404 not found</h4><h2 id="websocket" tabindex="-1"><a class="header-anchor" href="#websocket" aria-hidden="true">#</a> websocket</h2><p>同时、双向、实时通信的技术，客户端通过 Http 协议请求，在握手阶段升级为 WebSocket 协议。基于 tcp。</p><h3 id="headers" tabindex="-1"><a class="header-anchor" href="#headers" aria-hidden="true">#</a> headers</h3><p>connection: upgrade, upgrade: websocket,</p><p>Websocket 通过 HTTP/1.1 协议的 101 状态码进行握手</p><p>请求</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>GET / HTTP/1.1
Host: localhost:8080
# 类似Host、Origin、Cookie等请求首部会照常发送
Origin: [url=http://127.0.0.1:3000]http://127.0.0.1:3000[/url]
Connection: Upgrade
Upgrade: websocket
Sec-WebSocket-Version: 13 #websocket 版本
Sec-WebSocket-Key: w4v7O6xFTi36lq3RNcgctw==
Sec-WebSocket-Protocol: chat, superchat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>响应</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>HTTP/1.1 101 Switching Protocols
Connection:Upgrade
Upgrade: websocket
Sec-WebSocket-Accept: Oy4NRAQ13jhfONC7bP8dTKb4PTU=
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>传输使用数据帧，支持二进制，或文本</p><h2 id="sse-server-sent-events" tabindex="-1"><a class="header-anchor" href="#sse-server-sent-events" aria-hidden="true">#</a> SSE server-sent events</h2><p>服务器向客户端发送文本消息的技术，SSE 基于 HTTP 协议中的持久连接，具有由 W3C 标准化的网络协议和 EventSource 客户端 api。</p><p>缺点：</p><ol><li><p>它是单向的，只能由服务端发送给客户端</p></li><li><p>只发送文本消息；尽管可以使用 Base64 编码和 gzip 压缩来发送二进制消息，但效率很低。</p></li><li><p>许多浏览器允许打开数量非常有限的 SSE 连接（Chrome、Firefox 每个浏览器最多 6 个连接）</p></li><li><p>客户端发出 GET 请求，和 header，来订阅服务器事件</p></li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>GET /sse HTTP/1.1
Accept: text/event-stream 表示可接收事件流类型
Cache-Control: no-cache 禁用任何的事件缓存
Connection: keep-alive 表示正在使用持久连接
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>服务器确认订阅</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>HTTP/1.1 200
Content-Type: text/event-stream;charset=UTF-8 表示标准要求的事件的媒体类型和编码
Transfer-Encoding: chunked 表示服务器流式传输动态生成的内容，因此内容大小事先未知
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><code>EentSource</code> API</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> eventSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">&#39;/sse?event=type1&amp;event=type2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
eventSource<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;connection is established&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
eventSource<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;id: &#39;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>lastEventId <span class="token operator">+</span> <span class="token string">&#39;, data: &#39;</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
eventSource<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token string">&#39;connection state: &#39;</span> <span class="token operator">+</span> eventSource<span class="token punctuation">.</span>readyState <span class="token operator">+</span> <span class="token string">&#39;, error: &#39;</span> <span class="token operator">+</span> event
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
eventSource<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
eventSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventSource</span><span class="token punctuation">(</span><span class="token string">&#39;/sse?event=type1&amp;event=type2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安全" tabindex="-1"><a class="header-anchor" href="#安全" aria-hidden="true">#</a> 安全</h2><h3 id="csrf-跨站请求伪造" tabindex="-1"><a class="header-anchor" href="#csrf-跨站请求伪造" aria-hidden="true">#</a> csrf 跨站请求伪造</h3><p><img src="/Notes/images/Browser-csrf.webp" alt="csrf"></p><p>已登录用户访问攻击者网站，攻击网站向被攻击网站服务器发起恶意请求（利用浏览器会自动携带 cookie）。</p><p>在业界目前防御 CSRF 攻击主要有三种策略：</p><ol><li>验证 HTTP Referer / origin 字段；依赖于浏览器的实现</li><li>在请求地址中添加 token 并验证；</li><li>在 HTTP 头中自定义属性并验证。下面就分别对这三种策略进行详细介绍。</li><li>添加验证码 CAPTCHA</li><li>CORS，</li><li>cookie，set-cookie： SameSite</li></ol><h3 id="xss-跨站脚本攻击" tabindex="-1"><a class="header-anchor" href="#xss-跨站脚本攻击" aria-hidden="true">#</a> xss 跨站脚本攻击</h3><p>攻击者脚本   嵌入   被攻击网站，获取用户 cookie 等隐私信息。</p><ul><li>存储型：注入恶意的代码到服务器， 通过 input 提交代码</li><li>反射型：点击恶意链接， 注入脚本进入被攻击者的网站， 服务端不存储恶意代码</li><li>劫持：传输过程中劫持， 修改 html dom</li></ul><p>防御策略：</p><ol><li>对输入脚本进行过滤或转码， 白名单过滤标签属性</li><li>输出口编码</li><li>CSP  保护前端网站</li><li>HttpOnly， 不让 js 获取 cookie</li><li>非标准。HTTP 响应中设置安全头部，如 X-XSS-Protection 和 X-Content-Type-Options</li></ol><h3 id="noreferer-noopener" tabindex="-1"><a class="header-anchor" href="#noreferer-noopener" aria-hidden="true">#</a> noreferer/noopener</h3><h4 id="noreferer" tabindex="-1"><a class="header-anchor" href="#noreferer" aria-hidden="true">#</a> noreferer</h4><p><code>&lt;a href=&quot;&quot; rel=&quot;noreferer&quot;&gt;link&lt;/a&gt;</code></p><p>一般跳转会携带 referer 头表明来源。noreferer 可以不携带，避免服务器根据 referer 返回钓鱼网页</p><h4 id="noopener" tabindex="-1"><a class="header-anchor" href="#noopener" aria-hidden="true">#</a> noopener</h4><p><code>&lt;a href=&quot;http://other.site&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;LINK&lt;/a&gt;</code></p><p>配置了<code>_blank</code>会打开新的标签页，新标签页可以获取到原标签页的属性 <code>window.opener</code>，可以访问原标签页的 location。保护原标签页 url location 不被篡改，noopner 不对传递原标签页的文档对象。</p><h2 id="三方-cookie" tabindex="-1"><a class="header-anchor" href="#三方-cookie" aria-hidden="true">#</a> 三方 cookie</h2><h3 id="chips" tabindex="-1"><a class="header-anchor" href="#chips" aria-hidden="true">#</a> CHIPS</h3><p>具有独立分区状态的 Cookie (CHIPS) ，它允许开发者将 Cookie 选择到“分区”存储中，每个顶级站点都有单独的 Cookie jar。</p><p>在 A 站访问 C 站，C 站将会在 A 站种 cookie，禁用三方 cookie，C 将访问不到 cookie。</p><p>引入 Partitioned 概念，C 站在 A 站种的 cookie，C 只能在访问 A 站时访问到这个 cookie。</p><p><code>Set-Cookie: name=ConardLi; SameSite=None; Secure; Path=/; Partitioned;</code></p><p>C 在它的 Cookie 上指定了 Partitioned 属性，这个 Cookie 将保存在一个特殊的分区 jar 中。它只会在站点 A 中通过 iframe 嵌入站点 C 时才会生效，浏览器会判定只会在顶级站点为 A 时才发送该 Cookie。</p><p><a href="/images/CHIPS-1.png" target="_blank" rel="noopener noreferrer">CHIPS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="/images/CHIPS-2.png" target="_blank" rel="noopener noreferrer">CHIPS<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="first-party-sets-第一方集" tabindex="-1"><a class="header-anchor" href="#first-party-sets-第一方集" aria-hidden="true">#</a> First-Party Sets 第一方集</h3><p>douyin.com、bytedance.com 这两个域名虽然是属于同一个组织，但是 Chrome 不知道，你可以通过把它们放到一个集合里来告诉 Chrome 这些不同的域名属于同一个组织。</p><ol><li>把想要共享 Cookie 的不同域名放到一个集合里，然后提交给 Chrome；</li><li>使用 Chrome 提供的特殊的方式来读取这些域名集合下共享的 Cookie；</li></ol></div><!--[--><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: imsbt@outlook.com">Paul</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/Notes/frontend/%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87.html" class="" aria-label="性能指标"><!--[--><!--]--> 性能指标 <!--[--><!--]--></a></span><span class="next"><a href="/Notes/frontend/%E8%87%AA%E5%AE%9A%E4%B9%89vite%E6%8F%92%E4%BB%B6.html" class="" aria-label="自定义 vite 插件"><!--[--><!--]--> 自定义 vite 插件 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!----><!--]--></div>
    <script type="module" src="/Notes/assets/app-7D7ZZLlA.js" defer></script>
  </body>
</html>
